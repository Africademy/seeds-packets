<script type="text/babel">
  class ExampleTable extends React.Component {
    constructor(props) {
      super(props);
      // Grab the first token and determine available token types
      const firstToken = props.tokens[0];
      const types = {
        app: firstToken.app,
        sass: firstToken.sass,
        javascript: firstToken.javascript,
        swift: firstToken.swift,
        android: firstToken.android,
        python: firstToken.python
      };
      const availableTypes = Object.keys(types).filter(type => types[type]);

      this.state = {
        types: availableTypes,
        selectedType: availableTypes[0]
      };
    }

    changeTokenType = e => {
      this.setState({
        selectedType: e.target.value
      });
    }

    render() {
      const {tokens, ChildClass} = this.props;
      const {types, selectedType} = this.state;

      return (
        <table>
          <thead>
            <tr>
              <th scope="col">
                Name
                <select value={selectedType} onChange={this.changeTokenType}>
                  {types.map(type => <option value={type}>{type}</option>)}
                </select>
              </th>

              <th scope="col">
                Value
              </th>

              <th scope="col">Example</th>
            </tr>
          </thead>

          <tbody>
            {tokens.map(token => (
              <tr key={token.app}>
                <th scope="row">
                  <pre>{token[selectedType]}</pre>
                </th>

                <td>
                  <pre>{token.value}</pre>
                </td>

                <td>
                  <ChildClass token={token} />
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      )
    }
  }
</script>
